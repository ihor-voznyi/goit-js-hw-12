{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45522161-5a4b1fd5e13efcf8857e5e3e0';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (query, page = 1) => {\n    try {\n        const response = await axios.get(``, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page,\n                per_page: 15,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from 'izitoast';\n\nconst imageGallery = document.querySelector('.gallery');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    overlayOpacity: 0.8,\n});\n\nexport const createGalleryCard = (pictureInfo) => {\n    return `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${pictureInfo.largeImageURL}\">\n                <img\n                class=\"gallery-image\"\n                src=\"${pictureInfo.webformatURL}\"\n                data-source=\"${pictureInfo.largeImageURL}\"\n                alt=\"${pictureInfo.tags}\"\n                />\n            </a>\n            <div class=\"info\">\n                <p class=\"text-info\">Likes: <span class=\"number-info\">${pictureInfo.likes}</span></p>\n                <p class=\"text-info\">Views: <span class=\"number-info\">${pictureInfo.views}</span></p>\n                <p class=\"text-info\">Comments: <span class=\"number-info\">${pictureInfo.comments}</span></p>\n                <p class=\"text-info\">Downloads: <span class=\"number-info\">${pictureInfo.downloads}</span></p>\n            </div>\n        </li>`;\n};\n\nexport const renderGallery = async (images, reset = false) => {\n    if (reset) {\n        imageGallery.innerHTML = \"\";\n    }\n\n    if (images.length === 0) {\n        iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: 'topRight',\n        });\n        return;\n    }\n\n    const galleryCardsTemplate = images.map(createGalleryCard).join('');\n    imageGallery.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n    lightbox.refresh();\n};","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\n\nconst searchForm = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst imageGallery = document.querySelector('.gallery');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nconst showLoader = () => {\n    loader.classList.remove('hidden');\n};\n\nconst hideLoader = () => {\n    loader.classList.add('hidden');\n};\n\nconst onSearchForm = (event) => {\n    event.preventDefault();\n    currentQuery = searchForm.elements.user_query.value.trim();\n    if (!currentQuery) {\n        return;\n    }\n    currentPage = 1;\n    searchImages(currentQuery, currentPage);\n};\n\nconst searchImages = async (query, page) => {\n    showLoader();\n    try {\n        const data = await fetchImages(query, page);\n        totalHits = data.totalHits;\n\n        if (totalHits === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: 'topRight',\n            });\n            loadMoreBtn.classList.add('hidden');\n            imageGallery.innerHTML = \"\";\n            return;\n        }\n\n        if (page === 1) {\n            renderGallery(data.hits, true);\n        } else {\n            renderGallery(data.hits, false);\n            smoothScroll();\n        }\n        searchForm.reset();\n        updateLoadMoreButton();\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        iziToast.error({\n            message: \"Something went wrong. Please try again later.\",\n            position: 'topRight'\n        });\n    } finally {\n        hideLoader();\n    }\n};\n\nconst updateLoadMoreButton = () => {\n    const totalPages = Math.ceil(totalHits / 15);\n    if (currentPage >= totalPages) {\n        loadMoreBtn.classList.add('hidden');\n        iziToast.info({\n            message: \"We’re sorry, but you’ve reached the end of search results.\",\n            position: 'topRight'\n        });\n    } else {\n        loadMoreBtn.classList.remove('hidden');\n    }\n};\n\nconst loadMoreImages = () => {\n    currentPage++;\n    searchImages(currentQuery, currentPage);\n};\n\nconst smoothScroll = () => {\n    const { height: cardHeight } = imageGallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n};\n\nsearchForm.addEventListener('submit', onSearchForm);\nloadMoreBtn.addEventListener('click', loadMoreImages);\nloadMoreBtn.classList.add('hidden');"],"names":["API_KEY","axios","fetchImages","query","page","error","imageGallery","lightbox","SimpleLightbox","createGalleryCard","pictureInfo","renderGallery","images","reset","iziToast","galleryCardsTemplate","searchForm","loader","loadMoreBtn","currentPage","currentQuery","totalHits","showLoader","hideLoader","onSearchForm","event","searchImages","data","smoothScroll","updateLoadMoreButton","totalPages","loadMoreImages","cardHeight"],"mappings":"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"}